<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rick and Morty Characters</title>

    <link rel="stylesheet" href="index.css">
</head>

<body>
    <header>
        <nav>
            <input type="search" name="search" id="search" placeholder="Which character do you want to find?">
        </nav>
    </header>

    <main>



        <div class="content">

        </div>

    </main>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

<script>
    $(() =>
    {

        /*API*/
        const urlRickApi = 'https://rickandmortyapi.com/api/'

        async function getRickAPI()
        {
            const response = await fetch(urlRickApi + 'character')
            const data = await response.json()
            const chars = data.results

            for (let i = 0; i <= chars.length; i++)
            {
                let imageUrl = chars[i].image
                createCard(imageUrl, chars[i].name, chars[i].location.name, chars[i].species, chars[i].status, chars[i].gender)
            }
        }

        getRickAPI()

        /*CRIAR CARDS DE PERSONAGENS*/
        function createCard(imageUrl, nameChar, location, specie, status, gender)
        {
            let card = document.createElement('div')
            let img = document.createElement('img')
            let data = document.createElement('div')
            let name = document.createElement('h2')
            let locationSpan = document.createElement('span')
            let specieSpan = document.createElement('span')
            let statusSpan = document.createElement('span')
            let genderSpan = document.createElement('span')

            card.setAttribute('id', nameChar)
            card.classList.add('card')
            img.setAttribute('src', imageUrl)
            data.classList.add('data')
            name.innerText = nameChar
            locationSpan.innerText = 'Location: ' + location
            specieSpan.innerText = 'Specie: ' + specie
            specieSpan.innerText = 'Status: ' + status
            genderSpan.innerText = 'Gender: ' + gender

            $('.content').append(card)
            card.append(img)
            card.append(data)
            data.append(name)
            data.append(locationSpan)
            data.append(specieSpan)
            data.append(statusSpan)
            data.append(genderSpan)
        }


        /*PESQUISA*/
        let input = $('#search')

        input.keyup(function ()
        {

            var value = $(this).val().toLowerCase();
            $(".card").filter(function ()
            {
                $(this).toggle($(this).attr('id').toLowerCase().indexOf(value) >= 0)
            });

        })

    })  
</script>

</html>